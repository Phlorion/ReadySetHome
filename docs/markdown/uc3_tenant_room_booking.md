# ΠΧ3. Αίτημα Κράτησης Διαμερίσματος

**Πρωτεύων Actor:** Ενοικιαστής<br>
**Ενδιαφερόμενοι:**<br>
**Ενοικιαστής:** Θέλει να πραγματοποιήσει κράτηση/ακύρωση για ένα διαμέρισμα που έχει επιλέξει.<br>
**Ιδιοκτήτης:** Ενημερώνεται για την κράτηση/ακύρωση.<br>
**Προυποθέσεις:** Ο ενοικιαστής πρέπει να ειναι συνδεμένος σε έναν έγκυρο λογαριασμό ενοικοιαστή.

## Βασική Ροή
### Α) Υποβολή αιτήματος κράτησης
1. Ο ενοικιαστής έχει επιλέξει ένα διαμέρισμα που επιθυμεί να ενοικιάσει.
2. Ο ενοικιαστής επιλέγει να προχωρήσει με την κράτηση του διαμερίσματος.
3. Το σύστημα επαληθεύει τη διαθεσιμότητα του διαμερίσματος για το επιλεγμένο διάστημα διαμονής.
4. Εάν το διαμέρισμα είναι διαθέσιμο, το σύστημα υπολογίζει την προκαταβολή που απαιτείται και την εμφανίζει στον ενοικιαστή.
5. Ο ενοικιαστής επιβεβαιώνει την κράτηση.
6. Ο ιδιοκτήτης ενημερώνεται για το αίτημα κράτησης του ενοικιαστή.
7. Το σύστημα καταχωρεί την κράτηση, ενημερώνει τον ενοικιαστή για την επιτυχή κράτηση και χρέωση της προκαταβολής.

## Εναλλακτικές Ροές
*3α. Το διαμέρισμα δεν είναι διαθέσιμο για το επιλεγμένο διάστημα διαμονής*

1. Το σύστημα εμφανίζει μήνυμα σφάλματος ότι το διαμέρισμα δεν είναι διαθέσιμο για το επιλεγμένο διάστημα διαμονής.
2. Η περίπτωση χρήσης τερματίζει.

*4α. Ο ενοικιαστής δεν επιθυμεί να προχωρήσει στην κράτηση*

1. Ο ενοικιαστής επιλέγει να ακυρώσει τη διαδικασία κράτησης.
2. Η περίπτωση χρήσης τερματίζει.


### Β) Aκύρωση Αιτήματος Κράτησης
1. Ο ενοικιαστής επιλέγει να δει κρατήσεις του στο σύστημα.
2. Το σύστημα εμφανίζει τις κρατήσεις του ενοικιαστή.
   * *2α. Ο ενοικιαστής δεν έχει πραγματοποίησει κράτηση.*
     1. Το σύστημα εμφανίζει μήνυμα σφάλματος ότι ο ενοικιαστής δεν έχει πραγματοποιήσει κράτηση.
     2. Η περίπτωση χρήσης τερματίζει.
3. Ο ενοικιαστής επιλέγει την κράτηση που θέλει να ακυρώσει.
4. Το σύστημα επιστρέφει την προκαταβολή στον ενοικιαστή.
   * *4α. Η ακύρωση έγινε σε διάστημα λιγότερου του ενός μήνα από την ημερομηνία για το check-in*
     1. Το σύστημα χρεώνει τον ενοικιαστή 5% του συνολικού κόστους διαμονής.
     2. Συνεχίζουμε στο βήμα 5.
5. Ο ενοικιαστής επιβεβαιώνει την ακύρωση.
   * *5α. Ο ενοικιαστής αποφασίζει τελικά να μην ακυρώσει την κράτηση*
     1. Η περίπτωση χρήσης τερματίζει.
6. Το σύστημα ενημερώνει την κατάσταση της κράτησης σε "Ακυρωμένη".
7. Το σύστημα επιστρέφει την προκαταβολή στον ενοικιαστή.
8. Ο ιδιοκτήτης ενημερώνεται για την ακύρωση.
9. Το διαμέρισμα τείθεται ελεύθερο πρός ενοικίαση.
   
## Διαγράμματα

### Διάγραμμα δραστηριότητας - Αίτημα Κράτησης

![Διάγραμμα δραστηριότητας - Αίτημα Κράτησης](/docs/markdown/uml/requirements/uc1_act_tenant_room_booking.png)

### Διάγραμμα ακολουθίας - Αίτημα Κράτησης

![Διάγραμμα ακολουθίας - Αίτημα Κράτησης](/docs/markdown/uml/requirements/uc1_seq_tenant_room_booking.png)
