# ΠΧ7. Καταχώρηση Διαμερίσματος

**Πρωτεύων Actor**: Ιδιοκτήτης <br>
**Ενδιαφερόμενοι**: <br>
**Ιδιοκτήτης**: Θέλει να προβάλει το διαμέρισμά του στην εφαρμογή ώστε να το νοικιάσει. <br>
**Προϋποθέσεις**: Ο ιδιοκτήτης να έχει εγγραφεί στο σύστημα με λογαρισμό τύπου ιδιοκτήτη και να έχει επαληθεύσει τον λογαριασμό του.

## Βασική Ροή
### Α) Καταχώρηση Διαμερίσματος
1. Ο ιδιοκτήτης επιλέγει την καταχώρηση διαμερίσματος.
2. Εισάγει τις κατάλληλες πληροφορίες του διαμερίσματος (διαστάσεις, όροφος, τοποθεσία και φωτογραφίες).
3. Εισάγει τα στοιχεία χρέωσης (ημερήσια χρέωση, ελάχιστος αριθμός ημερών παραμονής και κόστος καθαρισμού).
4. Ο ιδιοκτήτης μπορεί να ορίσει διάφορες πολιτικές χρέωσης για συγκεκριμένες χρονικές περιόδους οι οποίες θα είναι μη επικαλυπτόμενες. 
5. Έλεγχος αν οι πολιτικές χρέωσης υπακούουν τους περιορισμούς που ορίζει το σύστημα ανάλογα με τις ιδιότητες του διαμερίσματος (περιοχή, τετραγωνικά).
6. Το σύστημα ελέγχει την εγκυρότητα της καταχώρισης.
7. Δίνεται στο διαμέρισμα που καταχωρήθηκε ένα μοναδικό id.
8. Ο ιδιοκτήτης επιλέγει αν θέλει να προωθήσει την αγγελία του.

## Εναλλακτικές Ροές
<b>A)</b> *5α. Οι πολιτικές χρέωσης δεν είναι μέσα στους περιορισμούς*

1. Το σύστημα θα ενημερώνει τον ιδιοκτήτη ότι οι πολιτικές χρέωσης που προσαπάθησε να ορίσει δεν υπακούουν τους περιορισμούς που έχουν οριστεί στα πλαίσια του διαμερίσματός του.
2. Επιστροφή στο βήμα 3.

*6α. Ο ιδιοκτήτης έχει καταχωρίσει ήδη την ίδια αγγελία*
1. Το σύστημα ενημερώνει τον ιδιοκτήτη ότι το διαμέρισμα ήδη έχει καταχωριθεί.
2. Τερματίζει η περίπτωση χρήσης.

### Β) Ενημέρωση Διαμερίσματος
1. Ο ιδιοκτήτης επιλέγει να ενημερώσει ένα διαμέρισμα που έχει καταχωρήσει στην εφαρμογή.
2. Από τα στοιχεία που μπορεί να ενημερώσει, αλλάζει αυτά που θέλει.
3. Το σύστημα ελέγχει την εγκυρότητα των αλλαγών.
   * *3α. Οι νέες πολιτικές χρέωσης δεν είναι μέσα στους περιορισμούς*
      1. Το σύστημα θα ενημερώνει τον ιδιοκτήτη ότι οι πολιτικές χρέωσης που προσαπάθησε να ορίσει δεν υπακούουν τους περιορισμούς που έχουν οριστεί στα πλαίσια του διαμερίσματός του.
      2. Επιστροφή στο βήμα 2.
4. Το σύστημα ενημερώνει την αγγελία.

### Γ) Διαγραφή Καταχώρησης Διαμερίσματος
1. Ο ιδιοκτήτης επιλέγει να διαγράψει ένα διαμέρισμα που έχει καταχωρήσει.
2. Έλεγχος αν υπάρχουν κρατήσεις.
   * *2α. Υπάρχουν κρατήσεις στο διαμέρισμα*
     1. Ο ιδιοκτήτης ακυρώνει όλες τις κρατήσεις (οπότε οι ενοικιαστές δεν χρεώνονται τίποτα).
     2. Το σύστημα ενημερώνει τους ενοικιαστές πως η κράτηση τους για το διαμέρισμα ακυρώθηκε από τον ιδιοκτήτη.
     3. Το σύστημα επιστρέφει τα χρήματα στους ενοικιαστές.
     4. Συνέχεια στο βήμα 3.
3. Το σύστημα αφαιρεί το διαμέρισμα.

## Διαγράμματα

### Διάγραμμα δραστηριότητας - Καταχώριση Διαμερίσματος
![Διάγραμμα δραστηριότητας - Σύνδεση](/docs/markdown/uml/requirements/uc7_act_owner_house_register.png)